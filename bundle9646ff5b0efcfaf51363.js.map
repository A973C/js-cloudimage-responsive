{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./examples/src/index.js","webpack:///./src/index.js","webpack:///./src/ci.service.js","webpack:///./src/ci.utils.js","webpack:///./node_modules/throttle-debounce/index.esm.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","spinner","document","getElementById","wrapper","window","CIResponsive","token","baseUrl","filters","queryString","lazyLoadOffset","lazyLoading","init","lazySizes","classList","add","style","display","_ci","_throttleDebounce","config","_this","this","_classCallCheck","_config$token","undefined","_config$container","container","_config$ultraFast","ultraFast","_config$lazyLoading","_config$imgLoadingAni","imgLoadingAnimation","_config$lazyLoadOffse","_config$width","width","_config$height","height","_config$operation","operation","_config$filters","_config$placeholderBa","placeholderBackground","_config$baseUrl","_config$ratio","ratio","presets","_config$queryString","head","getElementsByTagName","backgroundImgIndex","forceUpdate","xs","sm","md","lg","xl","innerWidth","updateDimensions","debounce","process","addEventListener","isUpdate","_this2","filterImages","querySelectorAll","forEach","image","processImage","_this3","isResponsiveAndLoaded","addClass","parentContainerWidth","getParentWidth","_getImageProps","getImageProps","_getImageProps$operat","_getImageProps$size","size","_getImageProps$filter","src","isAdaptive","checkOnMedia","getAdaptiveSize","ratioBySize","getRatioBySize","isRatio","Math","floor","isRelativeUrlPath","checkIfRelativeUrlPath","imgSrc","getImgSrc","resultSize","getSizeAccordingToPixelRatio","isPreview","setAnimation","getWrapper","paddingBottom","wrap","fallbackImageUrl","generateUrl","wrapWithPicture","onImageLoad","background","removeClass","finishAnimation","previewImg","parentNode","pictureElem","querySelector","createElement","className","insertBefore","url","sources","generateSources","previewSources","addSources","setSrc","onload","cloudimageUrl","isPreviewImg","indexOf","split","map","join","propertyName","_config2","dataSrcAttr","setAttribute","source","_config3","dataSrcsetAttr","filter","transform","setTimeout","transition","nextSibling","appendChild","nodeName","toLowerCase","_this4","concat","_toConsumableArray","slice","reverse","_ref","mediaQuery","srcSet","createSrouce","insertSource","media","setSrcset","_this5","elem","index","srcset","splittedSizes","toString","result","push","round","devicePixelRatio","getParentContainerWithWidth","img","getBoundingClientRect","generateSrcset","imgWidth","imgHeight","generateImgSrc","getBreakPoint","find","item","matchMedia","matches","factor","imgSize","trunc","replace","getSizeLimit","currentSize","attr","element","attribute","getAttribute","includes","length","e","location","protocol","arguments","parentElement","parentContainer","currentWidth","parseInt","computedWidth","getComputedStyle","nextSize","_typeof","breakPointSource","breakPointSize","images","type","filtered","isProcessed","contains","remove","arrayOfSizes","sizes","string","groups","match","variable","throttle","delay","noTrailing","callback","debounceMode","timeoutID","lastExec","self","elapsed","Number","Date","args","exec","apply","clearTimeout","atBegin","__webpack_exports__"],"mappings":"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","file":"bundle9646ff5b0efcfaf51363.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import '../../src';\nimport './style.css';\nimport './assets/fonts/helvetica-neue.css';\n\nconst spinner = document.getElementById('spinner');\nconst wrapper = document.getElementById('main');\nconst ciResponsive = new window.CIResponsive({\n  token: 'demo',\n  baseUrl: 'https://cloudimage.public.airstore.io/demo/',\n  filters: 'q35.foil1',\n  queryString: '?&size_info=1&v2',\n  lazyLoadOffset: 100,\n  lazyLoading: true\n});\n\n\nciResponsive.init();\n\nwindow.lazySizes.init();\n\nwrapper.classList.add('active');\nspinner.style.display = 'none';\n","import CIResponsive from './ci.service';\nimport './ci.styles.css';\n\nwindow.CIResponsive = CIResponsive;","import {\n  filterImages, getImageProps, getParentWidth, checkOnMedia, checkIfRelativeUrlPath,\n  getImgSrc, getSizeAccordingToPixelRatio, generateUrl, generateSources, insertSource, addClass, getRatioBySize,\n  isResponsiveAndLoaded, removeClass, getAdaptiveSize\n} from './ci.utils';\nimport { debounce } from 'throttle-debounce';\n\n\nexport default class CIResponsive {\n  constructor(config) {\n    const {\n      token = '',\n      container = 'cloudimg.io',\n      ultraFast = false,\n      lazyLoading = false,\n      imgLoadingAnimation = true,\n      lazyLoadOffset = 100,\n      width = '400',\n      height = '300',\n      operation = 'width',\n      filters = 'n',\n      placeholderBackground = '#f4f4f4',\n      baseUrl = '/',\n      ratio = 1.5,\n      presets,\n      queryString = ''\n    } = config;\n\n    this.head = document.head || document.getElementsByTagName('head')[0];\n    this.backgroundImgIndex = 0;\n    this.forceUpdate = false;\n    this.config = {\n      token,\n      container,\n      ultraFast,\n      lazyLoading,\n      imgLoadingAnimation,\n      lazyLoadOffset,\n      width,\n      height,\n      operation,\n      filters,\n      placeholderBackground,\n      baseUrl,\n      ratio,\n      presets: presets ? presets :\n        {\n          xs: '(max-width: 575px)',  // to 575       PHONE\n          sm: '(min-width: 576px)',  // 576 - 767    PHABLET\n          md: '(min-width: 768px)',  // 768 - 991    TABLET\n          lg: '(min-width: 992px)',  // 992 - 1199   SMALL_LAPTOP_SCREEN\n          xl: '(min-width: 1200px)'  // from 1200    USUALSCREEN\n        },\n      queryString,\n      innerWidth: window.innerWidth,\n      //isChrome: /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)\n    };\n\n    this.updateDimensions = debounce(100, () => {\n      const { innerWidth } = this.config;\n\n      this.process(true);\n\n      if (this.config.innerWidth < window.innerWidth)\n        this.config.innerWidth = window.innerWidth;\n    });\n\n    window.addEventListener('resize', this.updateDimensions);\n  }\n\n  init() {\n    this.process();\n  }\n\n  setForceUpdate() {\n    this.forceUpdate = value;\n\n    if (value) this.process(true);\n  }\n\n  process(isUpdate) {\n    const images = filterImages(document.querySelectorAll('img[ci-src]'), 'ci-src');\n    // in progress\n    //const backgroundImages = filterImages(document.querySelectorAll('[ci-background]'), 'ci-background');\n\n    images.forEach((image) => { this.processImage(image, isUpdate); });\n    // in progress\n    //backgroundImages.forEach((image) => { this.processBackgroundImage(image); });\n  }\n\n  processImage(image, isUpdate) {\n    if (isResponsiveAndLoaded(image) && !(this.config.innerWidth < window.innerWidth)) return;\n    addClass(image, 'ci-image');\n\n    if (this.config.lazyLoading)\n      addClass(image, 'lazyload');\n\n    let parentContainerWidth = getParentWidth(image, this.config);\n\n    let {\n      operation = this.config.operation,\n      size = (this.config.size || parentContainerWidth),\n      filters = this.config.filters,\n      ratio,\n      src\n    } = getImageProps(image);\n    const isAdaptive = checkOnMedia(size);\n    size = isAdaptive ? getAdaptiveSize(size, this.config) : size;\n\n    if (isAdaptive && isUpdate) return;\n\n    const ratioBySize = getRatioBySize(size, this.config);\n    const imageHeight = Math.floor(parentContainerWidth / (ratioBySize || ratio));\n    const isRatio = !!(ratioBySize || ratio);\n    let wrapper = null;\n\n    ratio = ratio || this.config.ratio;\n\n    const isRelativeUrlPath = checkIfRelativeUrlPath(src);\n    const imgSrc = getImgSrc(src, isRelativeUrlPath, this.config.baseUrl);\n    const resultSize = isAdaptive ? size : getSizeAccordingToPixelRatio(size);\n    //const isPreview = !this.config.isChrome && (parentContainerWidth > 400) && this.config.lazyLoading;\n    const isPreview = (parentContainerWidth > 400) && this.config.lazyLoading;\n\n    if (this.config.imgLoadingAnimation && !isUpdate) {\n      this.setAnimation(image, parentContainerWidth);\n    }\n\n    if (!isUpdate) {\n      wrapper = this.wrap(image, null, isRatio, ratioBySize, ratio, isPreview);\n    } else {\n      wrapper = this.getWrapper(image);\n\n      if (isRatio) {\n        wrapper.style.paddingBottom = (100 / (ratioBySize || ratio)) + '%';\n      }\n\n      if (isAdaptive) return;\n    }\n\n    if (isRatio) {\n      addClass(image, 'ci-image-ratio');\n    }\n\n\n    if (isAdaptive) {\n      const fallbackImageUrl =\n        generateUrl('width', getSizeAccordingToPixelRatio(parentContainerWidth), filters, imgSrc, this.config);\n      this.wrapWithPicture(image);\n      const onImageLoad = () => {\n        wrapper.style.background = 'transparent';\n        wrapper.style.paddingBottom = '0';\n        removeClass(image, 'ci-image-ratio');\n        removeClass(wrapper, 'ci-image-wrapper-ratio')\n        this.finishAnimation(image);\n      }\n\n      if (!isPreview) {\n        const sources = generateSources(operation, resultSize, filters, imgSrc, isAdaptive, this.config);\n\n        this.addSources(image, sources);\n        this.setSrc(image, fallbackImageUrl);\n\n        if (this.config.imgLoadingAnimation) {\n          image.onload = onImageLoad;\n        }\n      }\n\n      else {\n        let previewImg = null;\n        const container = image.parentNode.parentNode;\n        const pictureElem = container.querySelector('picture');\n\n        previewImg = document.createElement('img');\n        previewImg.className = `${isRatio ? 'ci-image-ratio ' : ''}ci-image-preview lazyload`;\n        container.classList.add(\"ci-with-preview-image\");\n        container.insertBefore(previewImg, pictureElem);\n\n        this.wrapWithPicture(previewImg);\n\n        if (!isUpdate) this.setAnimation(previewImg, parentContainerWidth);\n\n        const config = { ...this.config, queryString: '' };\n        const url = generateUrl('width', (parentContainerWidth / 5), 'q5.foil1', imgSrc, config);\n        const sources = generateSources(operation, resultSize, filters, imgSrc, isAdaptive, this.config);\n        const previewSources = generateSources(operation, resultSize, 'q5.foil1', imgSrc, isAdaptive, config, true);\n\n        this.addSources(previewImg, previewSources);\n        this.addSources(image, sources);\n\n        this.setSrc(previewImg, url);\n        this.setSrc(image, fallbackImageUrl);\n\n        image.onload = () => {\n          onImageLoad();\n          previewImg.style.display = 'none';\n        }\n      }\n    }\n\n    else if (isPreview && isRatio) {\n      const cloudimageUrl = generateUrl(operation, resultSize, filters, imgSrc, this.config);\n      const container = image.parentNode;\n      const isPreviewImg = container.className.indexOf('ci-with-preview-image') > -1;\n      const config = { ...this.config, queryString: '' };\n      const size = resultSize.split('x').map(size => size / 5).join('x');\n      const url = generateUrl(operation, size, 'q5.foil1', imgSrc, config);\n      let previewImg = null;\n\n      if (isPreviewImg) {\n        previewImg = container.querySelector('img.ci-image-preview');\n      } else {\n        previewImg = document.createElement('img');\n        previewImg.className = `${isRatio ? 'ci-image-ratio ' : ''} ci-image-preview lazyload`;\n        container.classList.add(\"ci-with-preview-image\");\n        image.parentNode.insertBefore(previewImg, image);\n      }\n\n      if (!isUpdate) this.setAnimation(previewImg, parentContainerWidth);\n      this.setSrc(previewImg, url, 'data-src');\n\n      this.setSrc(image, cloudimageUrl, 'data-src');\n\n      image.onload = () => {\n        wrapper.style.background = 'transparent';\n        previewImg.style.display = 'none';\n        this.finishAnimation(image);\n      }\n    }\n\n    else {\n      const cloudimageUrl = generateUrl(operation, resultSize, filters, imgSrc, this.config);\n\n      image.onload = () => {\n        wrapper.style.background = 'transparent';\n        this.finishAnimation(image);\n      };\n      this.setSrc(image, cloudimageUrl);\n    }\n  }\n\n  getWrapper(image) {\n    if ((image.parentNode.className || '').indexOf('ci-image-wrapper') > -1) {\n      return image.parentNode;\n    }\n    else if ((image.parentNode.parentNode.className || '').indexOf('ci-image-wrapper') > -1) {\n      return image.parentNode.parentNode;\n    }\n  }\n\n  setSrc(image, url, propertyName) {\n    const { lazyLoading, dataSrcAttr } = this.config;\n\n    image.setAttribute(propertyName ? propertyName : (lazyLoading ? 'data-src' : dataSrcAttr ? dataSrcAttr : 'src'), url);\n  }\n\n  setSrcset(source, url) {\n    const { lazyLoading, dataSrcsetAttr } = this.config;\n\n    source.setAttribute(lazyLoading ? 'data-srcset' : dataSrcsetAttr ? dataSrcsetAttr : 'srcset', url);\n  }\n\n  setAnimation(image, parentContainerWidth) {\n    image.style.filter = `blur(${Math.floor(parentContainerWidth / 100)}px)`;\n    image.style.transform = 'scale3d(1.1, 1.1, 1)';\n\n    setTimeout(() => {\n      image.style.transition = 'all 0.3s ease-in-out';\n    })\n  }\n\n  finishAnimation(image) {\n    image.style.filter = 'blur(0px)';\n    image.style.transform = 'translateZ(0) scale3d(1, 1, 1)';\n    addClass(image, 'ci-image-loaded');\n  }\n\n  wrap(image, wrapper, isRatio, ratioBySize, ratio) {\n    if ((image.parentNode.className || '').indexOf('ci-image-wrapper') > -1 ||\n      (image.parentNode.parentNode.className || '').indexOf('ci-image-wrapper') > -1) {\n      wrapper = image.parentNode;\n\n      addClass(wrapper, 'ci-image-wrapper');\n      wrapper.style.background = this.config.placeholderBackground;\n\n      if (isRatio) {\n        addClass(wrapper, 'ci-image-wrapper-ratio');\n      }\n\n      return;\n    }\n\n    wrapper = wrapper || document.createElement('div');\n\n    addClass(wrapper, 'ci-image-wrapper');\n    wrapper.style.background = this.config.placeholderBackground;\n\n    if (isRatio) {\n      addClass(wrapper, 'ci-image-wrapper-ratio');\n      wrapper.style.paddingBottom = (100 / (ratioBySize || ratio)) + '%';\n    }\n\n    if (image.nextSibling) {\n      image.parentNode.insertBefore(wrapper, image.nextSibling);\n    } else {\n      image.parentNode.appendChild(wrapper);\n    }\n\n    wrapper.appendChild(image);\n\n    return wrapper;\n  }\n\n  wrapWithPicture(image, wrapper) {\n    if ((image.parentNode.nodeName || '').toLowerCase() !== 'picture') {\n      wrapper = wrapper || document.createElement('picture');\n\n      if (image.nextSibling) {\n        image.parentNode.insertBefore(wrapper, image.nextSibling);\n      } else {\n        image.parentNode.appendChild(wrapper);\n      }\n\n      wrapper.appendChild(image);\n    }\n  }\n\n  addSources(image, previewSources) {\n    [...previewSources.slice(1).reverse()].forEach(({ mediaQuery, srcSet }) => {\n      const source = this.createSrouce(mediaQuery, srcSet);\n\n      insertSource(image, source);\n    });\n\n    insertSource(image, this.createSrouce(null, previewSources[0].srcSet));\n  }\n\n  createSrouce(mediaQuery, srcSet) {\n    const source = document.createElement('source');\n\n    if (mediaQuery) source.media = mediaQuery;\n    this.setSrcset(source, srcSet)\n\n    return source;\n  }\n\n  updateSources(image, previewSources, sources) {\n    const sourcesElems = image.parentNode.querySelectorAll('source');\n\n    sourcesElems.forEach((elem, index) => {\n      if (this.config.lazyLoading)\n        this.setSrcset(elem, sources[index].srcSet);\n\n      elem.srcset = sources[index].srcSet;\n    })\n  }\n\n  processBackgroundImage() {\n    // in progress\n  }\n}","const checkOnMedia = size => {\n  try {\n    const array = size.split(',');\n\n    return array.length > 1;\n  }\n  catch (e) {\n    return false;\n  }\n};\n\nconst checkIfRelativeUrlPath = src => {\n  if (src.indexOf('//') === 0) {\n    src = window.location.protocol + src;\n  }\n  return (src.indexOf('http://') !== 0 && src.indexOf('https://') !== 0 && src.indexOf('//') !== 0);\n}\n\nconst getImgSrc = (src, isRelativeUrlPath = false, baseUrl = '') => {\n  if (isRelativeUrlPath)\n    return baseUrl + src;\n\n  return src;\n}\n\nconst getSizeAccordingToPixelRatio = size => {\n  const splittedSizes = size.toString().split('x');\n  const result = [];\n\n  [].forEach.call(splittedSizes, size => {\n    result.push(size * Math.round(window.devicePixelRatio || 1));\n  });\n\n  return result.join('x');\n}\n\nconst generateUrl = (operation, size, filters, imgSrc, config) => {\n  const { ultraFast, token, container, queryString } = config;\n  const isUltraFast = ultraFast ? 'https://scaleflex.ultrafast.io/' : 'https://';\n  const cloudUrl = isUltraFast + token + '.' + container + '/';\n\n  return cloudUrl + operation + '/' + size + '/' + filters + '/' + imgSrc + queryString;\n}\n\nconst getParentWidth = (img, config) => {\n  if (!(img && img.parentElement && img.parentElement.getBoundingClientRect) && !(img && img.width))\n    return config.width;\n\n  const parentContainer = getParentContainerWithWidth(img);\n  const currentWidth = parseInt(parentContainer, 10);\n  const computedWidth = parseInt(window.getComputedStyle(img).width);\n\n  if ((computedWidth && (computedWidth < currentWidth && computedWidth > 15) || !currentWidth)) {\n    return getSizeLimit(computedWidth);\n  } else {\n    if (!currentWidth) return img.width || config.width;\n\n    return getSizeLimit(currentWidth);\n  }\n}\n\nconst getParentContainerWithWidth = img => {\n  let parentNode = null;\n  let width = 0;\n\n  do {\n    parentNode = (parentNode && parentNode.parentNode) || img.parentNode;\n    width = parentNode.getBoundingClientRect().width;\n  } while (parentNode && !width)\n\n  return width;\n}\n\nconst generateSources = (operation, size, filters, imgSrc, isAdaptive, config, isPreview) => {\n  const sources = [];\n\n  if (isAdaptive) {\n    size.forEach(({ size: nextSize, media: mediaQuery}) => {\n      if (isPreview) {\n        nextSize = nextSize.split('x').map(size => size / 5).join('x');\n        filters = 'q10.foil1';\n      }\n\n      sources.push({ mediaQuery, srcSet: generateSrcset(operation, nextSize, filters, imgSrc, config) });\n    })\n  } else {\n    if (isPreview) {\n      size = size.split('x').map(size => size / 5).join('x');\n      filters = 'q10.foil1';\n    }\n\n    sources.push({\n      srcSet: generateSrcset(operation, size, filters, imgSrc, config)\n    });\n  }\n  return sources;\n}\n\nconst generateSrcset = (operation, size, filters, imgSrc, config) => {\n  const imgWidth = size.toString().split('x')[0]\n  const imgHeight = size.toString().split('x')[1];\n\n  return generateImgSrc(operation, filters, imgSrc, imgWidth, imgHeight, 1, config);\n}\n\nconst getAdaptiveSize = (size, config) => {\n  const arrayOfSizes = size.split(',');\n  const sizes = [];\n\n  arrayOfSizes.forEach(string => {\n    const groups = string.match(/((?<variable>[a-z_][a-z_]*)|(?<media>\\([\\S\\s]*\\)))\\s*(?<size>[0-9xp]*)/).groups;\n    const media = groups.media ? groups.media : config.presets[groups.variable];\n\n    sizes.push({ media, size: groups.size });\n  })\n\n  return sizes;\n}\n\nconst getRatioBySize = (size, config) => {\n  let width, height;\n\n  if (typeof size === 'object') {\n    const breakPointSource = getBreakPoint(size);\n    let breakPointSize = breakPointSource ? breakPointSource.size : size[0].size;\n\n    width = breakPointSize.toString().split('x')[0]\n    height = breakPointSize.toString().split('x')[1];\n  } else {\n    width = size.toString().split('x')[0]\n    height = size.toString().split('x')[1];\n  }\n\n  if (width && height)\n    return width / height;\n\n  return null;\n}\n\nconst getBreakPoint = (size) => [...size].reverse().find(item => window.matchMedia(item.media).matches);\n\nconst generateImgSrc = (operation, filters, imgSrc, imgWidth, imgHeight, factor, config) => {\n  let imgSize = Math.trunc(imgWidth * factor);\n\n  if (imgHeight)\n    imgSize += 'x' + Math.trunc(imgHeight * factor);\n\n  return generateUrl(operation, getSizeAccordingToPixelRatio(imgSize), filters, imgSrc, config)\n    .replace('http://scaleflex.ultrafast.io/', '')\n    .replace('https://scaleflex.ultrafast.io/', '')\n    .replace('//scaleflex.ultrafast.io/', '')\n    .replace('///', '/');\n}\n\nconst getSizeLimit = (currentSize) => {\n  return currentSize <= 25 ? '25' :\n    currentSize <= 50 ? '50' :\n      currentSize <= 100 ? '100'\n        : currentSize <= 200 ? '200'\n        : currentSize <= 300 ? '300'\n          : currentSize <= 400 ? '400'\n            : currentSize <= 500 ? '500'\n              : currentSize <= 600 ? '600'\n                : currentSize <= 700 ? '700'\n                  : currentSize <= 800 ? '800'\n                    : currentSize <= 900 ? '900'\n                      : currentSize <= 1000 ? '1000'\n                        : currentSize <= 1100 ? '1100'\n                          : currentSize <= 1200 ? '1200'\n                            : currentSize <= 1300 ? '1300'\n                              : currentSize <= 1400 ? '1400'\n                                : currentSize <= 1500 ? '1500'\n                                  : currentSize <= 1600 ? '1600'\n                                    : currentSize <= 1700 ? '1700'\n                                      : currentSize <= 1800 ? '1800'\n                                        : currentSize <= 1900 ? '1900'\n                                          : currentSize <= 2400 ? '2400'\n                                            : currentSize <= 2800 ? '2800'\n                                              : '3600';\n}\n\nconst filterImages = (images, type) => {\n  const filtered = [];\n\n  for (let i = 0; i < images.length; i++) {\n    const image = images[i];\n    const size = image.getAttribute(type) || '';\n    const isProcessed = image.getAttribute('data-is-ci-processed') === 'true';\n\n    if (size.slice(-4).toLowerCase() !== '.svg' && !isProcessed) {\n      filtered.push(image);\n    }\n  }\n\n  return filtered;\n}\n\nconst getImageProps = (image) => ({\n  operation: attr(image, 'o') || attr(image, 'operation') || attr(image, 'data-operation') || undefined,\n  size: attr(image, 's') || attr(image, 'size') || attr(image, 'data-size') || undefined,\n  filters: attr(image, 'f') || attr(image, 'filters') || attr(image, 'data-filters') || undefined,\n  ratio: attr(image, 'r') || attr(image, 'ratio') || attr(image, 'data-ratio') || undefined,\n  src: attr(image, 'ci-src') || attr(image, 'data-src') || undefined,\n});\n\nconst attr = (element, attribute) => element.getAttribute(attribute);\n\nexport const isResponsiveAndLoaded = image => (\n  !(attr(image, 's') || attr(image, 'size') || attr(image, 'data-size')) && image.className.includes('ci-image-loaded')\n);\n\nconst insertSource = (element, source) => {\n  element.parentNode.insertBefore(source, element);\n};\n\nconst addClass = (elem, className) => {\n  if (!elem.classList.contains(className)) {\n    elem.classList.add(className);\n  }\n}\n\nconst removeClass = (elem, className) => {\n  if (elem.classList.contains(className)) {\n    elem.classList.remove(className);\n  }\n}\n\nexport {\n  checkOnMedia,\n  checkIfRelativeUrlPath,\n  getImgSrc,\n  getSizeAccordingToPixelRatio,\n  generateUrl,\n  getParentWidth,\n  generateSources,\n  getRatioBySize,\n  getBreakPoint,\n  filterImages,\n  getImageProps,\n  insertSource,\n  addClass,\n  removeClass,\n  getAdaptiveSize\n}","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {Number}    delay          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}   [noTrailing]   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset)\n * @param  {Function}  callback       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {Boolean}   [debounceMode] If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @return {Function}  A new, throttled, function.\n */\nfunction throttle ( delay, noTrailing, callback, debounceMode ) {\n\n\t/*\n\t * After wrapper has stopped being called, this timeout ensures that\n\t * `callback` is executed at the proper times in `throttle` and `end`\n\t * debounce modes.\n\t */\n\tvar timeoutID;\n\n\t// Keep track of the last time `callback` was executed.\n\tvar lastExec = 0;\n\n\t// `noTrailing` defaults to falsy.\n\tif ( typeof noTrailing !== 'boolean' ) {\n\t\tdebounceMode = callback;\n\t\tcallback = noTrailing;\n\t\tnoTrailing = undefined;\n\t}\n\n\t/*\n\t * The `wrapper` function encapsulates all of the throttling / debouncing\n\t * functionality and when executed will limit the rate at which `callback`\n\t * is executed.\n\t */\n\tfunction wrapper () {\n\n\t\tvar self = this;\n\t\tvar elapsed = Number(new Date()) - lastExec;\n\t\tvar args = arguments;\n\n\t\t// Execute `callback` and update the `lastExec` timestamp.\n\t\tfunction exec () {\n\t\t\tlastExec = Number(new Date());\n\t\t\tcallback.apply(self, args);\n\t\t}\n\n\t\t/*\n\t\t * If `debounceMode` is true (at begin) this is used to clear the flag\n\t\t * to allow future `callback` executions.\n\t\t */\n\t\tfunction clear () {\n\t\t\ttimeoutID = undefined;\n\t\t}\n\n\t\tif ( debounceMode && !timeoutID ) {\n\t\t\t/*\n\t\t\t * Since `wrapper` is being called for the first time and\n\t\t\t * `debounceMode` is true (at begin), execute `callback`.\n\t\t\t */\n\t\t\texec();\n\t\t}\n\n\t\t// Clear any existing timeout.\n\t\tif ( timeoutID ) {\n\t\t\tclearTimeout(timeoutID);\n\t\t}\n\n\t\tif ( debounceMode === undefined && elapsed > delay ) {\n\t\t\t/*\n\t\t\t * In throttle mode, if `delay` time has been exceeded, execute\n\t\t\t * `callback`.\n\t\t\t */\n\t\t\texec();\n\n\t\t} else if ( noTrailing !== true ) {\n\t\t\t/*\n\t\t\t * In trailing throttle mode, since `delay` time has not been\n\t\t\t * exceeded, schedule `callback` to execute `delay` ms after most\n\t\t\t * recent execution.\n\t\t\t *\n\t\t\t * If `debounceMode` is true (at begin), schedule `clear` to execute\n\t\t\t * after `delay` ms.\n\t\t\t *\n\t\t\t * If `debounceMode` is false (at end), schedule `callback` to\n\t\t\t * execute after `delay` ms.\n\t\t\t */\n\t\t\ttimeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n\t\t}\n\n\t}\n\n\t// Return the wrapper function.\n\treturn wrapper;\n\n}\n\n/* eslint-disable no-undefined */\n\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {Number}   delay         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}  [atBegin]     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @return {Function} A new, debounced function.\n */\nfunction debounce ( delay, atBegin, callback ) {\n\treturn callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n}\n\nexport { throttle, debounce };\n"],"sourceRoot":""}